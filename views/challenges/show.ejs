<%- include('../partials/header.ejs') %>


<table>
    <thead><tr>
        <% if (user) { %>
        <td></td>
        <% } %>
        <td>Challenge Name</td>
        <td>Author</td>
        <td>Gist</td>
        <td>Number of Attempts</td>
        <td>Has This Been Solved?</td>
        <td>Details</td>
    </tr></thead>
    <tbody><tr>
        <% if (user) { %>
        <td><a href="/attempts/challenges/<%= challenge._id %>/new">Attempt this!</a></td>
        <% } %>
        <td><%= challenge.title %></td>
        <td><%= challenge.challenger.displayName %>
            <% if (user) { %>
            <%= JSON.stringify(challenge.challenger._id) === JSON.stringify(user._id) ? ' (You)' : '' %>
            <% } %>
        </td>
        <td><%= challenge.gist %></td>


        <!-- fix this when the attempts are working. -->
        <td><%= attemptsOfThisChallenge.length%></td>
        <td><%= challenge.isSolved ? 'Yes' : 'No' %></td>
        <td><%= challenge.details %></td>
    </tr>
    </tbody>
</table>
<br>
<br> 
<br>
<table>
    <thead><tr>
        <td>Coder</td>
        <td>Is this Correct?</td>
        <td>Brief Description</td>
        <td></td> 
    </tr></thead>
    <tbody>
        <% attemptsOfThisChallenge.forEach(function(attempt) { %>
            <tr>
                <td><%= attempt.coder.displayName %></td>
                <td>
                    <% if (attempt.isCorrect === -1) { %>Nope
                    <% } else if (attempt.isCorrect === 0) { %>Awaiting Review
                    <% } else { %>Yes!
                    <% } %>
                </td>
                <td><%= attempt.brief %></td>
                <td><a href="/attempts/<%= attempt._id %>">Details</a></td>
            </tr>
        <% }); %>
    </tbody>
</table>
    

<%- include('../partials/footer.ejs') %>